{% extends 'base.html' %}
{% load static %}

{% block extra_head %}
<script type="text/javascript" src="{% static "js/timer/jquery.countdown.js" %}"></script>
<script type="text/javascript" src="{% static "js/timer/jquery.countdown.min.js" %}"></script>
<link rel="stylesheet" type="text/css" href="{% static "css/landing_page.css" %}">
<script src="{% static "js/landing_page.js" %}"></script>
{% endblock extra_head %}

{% block title_splash %}

{% endblock title_splash %}

{% block mainbody %}
<div class="mainBody container">
    <div class="row selection-header sticky-top">
        <form class="form-inline">
            <input class="form-control mr-sm-2" type="search" placeholder="Search" size="80" aria-label="Search">
            <button class="btn btn-outline-warning my-2 my-sm-0" type="submit">Search</button>
        </form>
    </div>
    <div class="row content-container mt-4">
        <div class="col d-none mb-4 site-content">
            <div class="sidebar-header">Site Content</div>
            <div class="col sidebar-content">
                <a class="sidebar-ref" href="specsAndGuides">Specs & Guides</a>
                <p>If you need to know what consumes to bring to raid or a quick spec reference or you should check
                    out our Specs & Guides.</p>
                <a class="sidebar-ref" href="consumeTool">Consumable Calculator</a>
                <p>Getting your consumables crafted buy a guildie or crafting them yourself? Use our Consumable Tool
                    to find ot exactly what materials you need.</p>
                <a class="sidebar-ref" href="talent">Talent Calculator</a>
                <p>Want to mess around with your characters spec? Instead of wasting gold for an extra respec, plan
                    it out first with our Talent Calculator.</p>
                <a class="sidebar-ref" href="enchantTool">Enchant Calculator</a>
                <p>Got your preraid bis or a shiney new peice of gear from Molten Core? Use our Enchant Tool to get
                    all the correct materials before hitting up an enchanter.</p>
                <a class="sidebar-ref" href="contact">Contact Us</a>
                <p>Have an idea you'd like to see on the website? Found a bug? Send us a message and let us know
                    about it!</p>
                <span>Classic WoW releases in:</span>
                <div class="countdown"></div>
            </div>
        </div>


        {% for spec in specs %}
        <div class="col-12">
            <div class="feedItem row mt-5">
                <div class="col-4">
                    <div class="listImage"
                        style="background-image: url('static/images/icons/large/mini_spec/{{ spec.wow_class.name }}.png')">
                        <div class="listIcon">
                            {% with "images/icons/large/class/"|add:spec.wow_class.name|add:".jpg" as class_image %}
                            <img class="class-icon" src="{% static "images/icon_border_2.png" %}"
                                style="background-image: url('{% static class_image %}');">
                            {% endwith %}
                        </div>
                    </div>
                    <div class="row">
                    </div>
                </div>
                <div class="col-8">
                    <div class="row feed-header">

                    </div>
                    <div class="row feed-content">
                        <div class="col-8 feedTitle"><a
                                href="{% url 'talents' spec.wow_class.name %}?{{spec.hash}}">{{spec.name}}</a></div>
                        <div class="col-4">
                            <div class="pt-3">
                                {% for n in rangen %}
                                {% if n == rangen|first %}
                                <a class="btn btn-sm float-right"
                                    style="margin: 0 2px 0 1px; padding: 0 3px 0 3px; color: rgb(231, 186, 0); border: 0; -webkit-appearance: unset;">
                                    <span class="glyphicon glyphicon-star-empty" aria-hidden="true" title="Edit"></span>
                                </a>
                                {% else %}
                                <a class="btn btn-sm float-right"
                                    style="margin: 0 2px 0 1px; padding: 0 3px 0 3px; color: rgb(231, 186, 0); border: 0; -webkit-appearance: unset;">
                                    <span class="glyphicon glyphicon-star" aria-hidden="true" title="Edit"></span>
                                </a>
                                {% endif %}
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                    <div class="row feed-content">
                        <div class="col-12 feed-desc">
                            {{spec.description}}
                        </div>
                    </div>
                    <hr class="row mt-2 mb-2"
                        style="border-bottom: 1px solid white; width: 100%; margin-top:0; margin-bottom:0;">
                    </hr>
                    <div class="row feed-content">
                        {% for tag in spec.tags.all %}
                        <div class="feed-tag">{{tag.name}}</div>
                        {% endfor %}
                    </div>
                    <div class="row feed-content"></div>
                </div>
                <div class="col-12 row feed-footer">
                    <div class="col-4">
                        <span class="{{spec.wow_class.name}}">{{spec.wow_class.name|title}}</span>
                        <span class="">
                            (
                            {% with trees=spec.treeallotted_set.all %}
                            {% for tree in trees %}
                            {% if not tree == trees|first %}
                            /
                            {% else %}
                            {% endif %}
                            {{tree.invested}}
                            {% endfor %}
                            {% endwith %}
                            )
                        </span>
                    </div>
                    <div class="col-3">
                        {% if  spec.rating == None %}
                        No Rating Availible
                        {% else %}
                        {{spec.rating}} Avg Rating ({{spec.ratings.count}})
                        {% endif %}
                    </div>
                    <div class="col-5 text-left">
                        {% if spec.created == spec.updated %}
                        Created By {% if spec.user.email == request.user.email %}
                        <a href="">me</a>
                        {% elif not spec.private %}
                        <a href="">{{spec.user.disc_username}}</a>
                        {% else %}
                        anonymous
                        {% endif %}
                        on
                        {{spec.created}}
                        {% else %}
                        Last Edited By {% if spec.user.email == request.user.email %}
                        <a href="">me</a>
                        {% elif not spec.private %}
                        <a href="">{{spec.user.disc_username}}</a>
                        {% else %}
                        anonymous
                        {% endif %}
                        on
                        {{spec.updated}}
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}


        {% for consumelist in consume_lists %}
        <div class="col-12">
            <div class="feedItem row mt-5">
                <div class="col-4">
                    <div class="listImage">
                        <div class="listIcon">
                            <img class="class-icon" src="{% static "images/icon_border_2.png" %}">
                        </div>
                    </div>
                    <div class="row">
                    </div>
                </div>
                <div class="col-8">
                    <div class="row feed-header">

                    </div>
                    <div class="row feed-content">
                        <div class="col-8 feedTitle"><a>{{consumelist.name}}</a></div>
                        <div class="col-4">
                            <div class="pt-3">
                                {% for n in rangen %}
                                {% if n == rangen|first %}
                                <a class="btn btn-sm float-right"
                                    style="margin: 0 2px 0 1px; padding: 0 3px 0 3px; color: rgb(231, 186, 0); border: 0; -webkit-appearance: unset;">
                                    <span class="glyphicon glyphicon-star-empty" aria-hidden="true" title="Edit"></span>
                                </a>
                                {% else %}
                                <a class="btn btn-sm float-right"
                                    style="margin: 0 2px 0 1px; padding: 0 3px 0 3px; color: rgb(231, 186, 0); border: 0; -webkit-appearance: unset;">
                                    <span class="glyphicon glyphicon-star" aria-hidden="true" title="Edit"></span>
                                </a>
                                {% endif %}
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                    <div class="row feed-content">
                        <div class="col-12 feed-desc">
                            {{consumelist.description}}
                        </div>
                    </div>
                    <hr class="row mt-2 mb-2"
                        style="border-bottom: 1px solid white; width: 100%; margin-top:0; margin-bottom:0;">
                    </hr>
                    <div class="row feed-content">
                        {% for tag in consumelist.tags.all %}
                        <div class="feed-tag">{{tag.name}}</div>
                        {% endfor %}
                    </div>
                    <div class="row feed-content"></div>
                </div>
                <div class="col-12 row feed-footer">
                    <div class="col-4">

                    </div>
                    <div class="col-3">
                        {% if  consumelist.rating == None %}
                        No Rating Availible
                        {% else %}
                        {{consumelist.rating}} Avg Rating ({{consumelist.ratings.count}})
                        {% endif %}
                    </div>
                    <div class="col-5 text-left">
                        {% if consumelist.created == consumelist.updated %}
                        Created By {% if consumelist.user.email == request.user.email %}
                        <a href="">me</a>
                        {% elif not consumelist.private %}
                        <a href="">{{consumelist.user.disc_username}}</a>
                        {% else %}
                        anonymous
                        {% endif %}
                        on
                        {{consumelist.created}}
                        {% else %}
                        Last Edited By {% if consumelist.user.email == request.user.email %}
                        <a href="">me</a>
                        {% elif not consumelist.private %}
                        <a href="">{{consumelist.user.disc_username}}</a>
                        {% else %}
                        anonymous
                        {% endif %}
                        on
                        {{consumelist.updated}}
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}


        <div class=" pt-4 ">
            <div class="card mb-3 bg-transparent border-light text-center">
                <h5 class="card-header bg-transparent border-light text-light">
                    Changelog
                </h5>
                <div class="card-body text-light">
                    <p class="card-text text-left">4/29/2019</p>
                    <ul class="card-text text-left">
                        <li>
                            Added Specs and Guides Section.
                        </li>
                        <li>
                            Added Working Talent Calculator.
                        </li>
                        <li>
                            Updated Consume Tool to display more useful information.
                        </li>
                        <li>
                            Changed overall site style and design.
                        </li>
                    </ul>
                    <p class="card-text text-left">1/5/2019</p>
                    <ul class="card-text text-left">
                        <li>
                            Initial Launch with consume tool and enchant tool.
                        </li>
                    </ul>
                </div>
                <div class="card-footer text-muted border-light">
                    <p>We are constantly adding new things to Onybuff.com</p>
                </div>
            </div>
        </div>
    </div>
</div>
</div>

{% endblock mainbody %}

{% block footer %}
{# "not necessary, here to demonstrate block.super" #}
{{block.super}}
{% endblock footer %}