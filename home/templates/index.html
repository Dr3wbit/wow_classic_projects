{% extends "base.html" %}
{% load static %}

{% block extra_head %}
<script type="text/javascript" src="{% static "js/timer/jquery.countdown.js" %}"></script>
<script type="text/javascript" src="{% static "js/timer/jquery.countdown.min.js" %}"></script>
<link rel="stylesheet" type="text/css" href="{% static "css/landing_page.css" %}">
<link rel="stylesheet" type="text/css" href="{% static "css/stars.css" %}">
<script src="{% static "js/landing_page.js" %}"></script>
{% endblock extra_head %}

{% block title_splash %}
{% endblock title_splash %}

{% block mainbody %}
<div class="mainBody container">
    <div class="row selection-header sticky-top">
        <div class="col">
            <form id="test_form" class="form-inline row selection-header">
                <div class="d-none d-md-inline-block col-xl-4 col-md-5">
                    <div class="dropdown show d-inline-block">
                        <a class="btn btn-sm btn-dark dropdown-toggle" href="#" role="button" id="dropdownFilterLink"
                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Filters
                        </a>
                        <div class="dropdown-menu dropdown-menu-custom" aria-labelledby="dropdownFilterLink">
                            <div class="filter-dropdown-container container row">
                                <div class="col-4">
                                    <div class="filter-category-title">Classes</div>
                                    <div name="wowclass" class="filter-container custom-scroll-bar">
                                        {% for class in wowclasses %}
                                        <div name="{{class.name}}" class="filter-box">{{class.name}}</div>
                                        {%endfor%}
                                    </div>
                                </div>
                                <div class="col-4">
                                    <div class="filter-category-title">Professions</div>
                                    <div name="profession" class="filter-container custom-scroll-bar">
                                        {% for profession in wowprofessions %}
                                        <div name="{{profession.name}}" class="filter-box">{{profession.name}}</div>
                                        {%endfor%}
                                    </div>
                                </div>
                                <div class="col-4">
                                    <div class="filter-category-title">Tags</div>
                                    <div name="tags" class="filter-container custom-scroll-bar">
                                        {% for tag in tags %}
                                        <div name="{{tag.name}}" class="filter-box">{{tag.name}}</div>
                                        {%endfor%}
                                    </div>
                                </div>
                                <div class="col-12 justify-content-around mt-2">
                                    <button class="btn btn-sm btn-dark" id="reset_filters" type="button">Reset</button>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="dropdown show d-inline-block">
                        <a class="btn btn-sm btn-dark dropdown-toggle" role="button" id="sorting"
                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Sort
                        </a>
                        <div class="dropdown-menu dropdown-menu-custom sortby-dropdown" aria-labelledby="sorting">
                            <a class="dropdown-item sorting-item" data-sort="data-rating">Rating</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item sorting-item" data-sort="data-created">Created</a>
                        </div>
                        <a id="sorting_order" class="btn btn-sm untouchable hidden">
                            <span class="glyphicon glyphicon-triangle-bottom untouchable"></span>
                        </a>
                    </div>
                </div>
                <div class="col-12 col-xl-8 col-md-7">
                    <input id="search_bar" class="fuzzy-search" placeholder="Search Keywords" size="30" aria-label="Search">
                </div>
            </form>
        </div>
    </div>
    <div class="row content-container mt-4">
        <div class="applied-filter-container mx-auto col-12"></div>
        <div id="saved_list_container" class="mx-auto list">
            <div class="pagination">
                <span class="step-links">
                    <div>
                        <a class="change-page" href="" >&laquo;</a>
                        <span class="current-page"><a class="change-page">1</a></span>
                        <a class="change-page" href="">2</a>
                        <a class="change-page" href="" >&raquo;</a>
                    </div>
                </span>
            </div>

            <div id="list_object" class="list">
            </div>
            {% comment %}
            {% include "index_helper.html" %}
            {% endcomment %}

        </div>

    </div>
</div>
</div>

{% endblock mainbody %}

{% block footer %}
{# "not necessary, here to demonstrate block.super" #}
{{block.super}}
{% endblock footer %}

{% block javascript %}
<script type="text/javascript" src="{% static "js/list.min.js" %}"></script>
<script type="text/javascript" src="{% static "js/index.js" %}"></script>
<script>

$(".change-page").on({
    click: e=> {
        e.preventDefault()
        let target = $(e.target)
        var page = 1
        if (target.text() == "»") {
            page = parseInt($("span.current-page").text()) + 1
        } else if (target.text() == "last »") {
            page = $("span.last-page").text()
        } else if (target.text() == "previous"){
            page = parseInt($("span.current-page").text()) - 1
        } else if (target.text() == "«"){
            page = parseInt($("span.current-page").text()) - 1
        } else {
            page = target.text()
        }
        let selected = $(".prof-filter.selected").attr("id");
        // build_recipe_list(selected, '', page)
    }
})
</script>
{% endblock javascript %}
