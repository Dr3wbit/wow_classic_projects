{% load static %}

{% if spec %}
	<h1 class="mt-5">{{spec.name}}</h1>
    <!-- add star rating here -->
	{% for tag in spec.tags.all %}
		<div class="feed-tag">{{tag.name}}</div>
	{% endfor %}
	<h5 span class="mt-3">{{spec.description|linebreaks}}</h5>
	<div class="mt-3">
        {% if spec.updated|date:"m/d/Y, P" == spec.created|date:"m/d/Y, P" %}
        Created By {% if spec.user == request.user %}
        <a href="">me</a>
        {% elif not spec.private %}
        <a href="">{{spec.user.disc_username}}</a>
        {% else %}
        anonymous
        {% endif %}
        on
        {{spec.created}}
        {% else %}
        Last Edited By {% if spec.user == request.user %}
        <a href="">me</a>
        {% elif not spec.private %}
        <a href="">{{spec.user.disc_username}}</a>
        {% else %}
        anonymous
        {% endif %}
        on
        {{spec.updated}}
        {% endif %}
        </div>
{% elif consume_list %}
{% with "images/icons/large/" as image_prefix %}

	<h1 class="mt-5">{{consume_list.name}}</h1>
    <!-- add star rating here -->
	{% for tag in consume_list.tags.all %}
		<div class="feed-tag">{{tag.name}}</div>
	{% endfor %}
	<h5 span class="mt-3">{{consume_list.description|linebreaks}}</h5>
	<div class="mt-3">
        {% if consume_list.updated|date:"m/d/Y, P" == consume_list.created|date:"m/d/Y, P" %}
            Created By {% if consume_list.user == request.user %}
            <a href="">me</a>
        {% elif not consume_list.private %}
            <a href="">{{consume_list.user.disc_username}}</a>
        {% else %}
            anonymous
        {% endif %}
        on
        {{consume_list.created}}
        {% else %}
        Last Edited By {% if consume_list.user == request.user %}
        <a href="">me</a>
        {% elif not consume_list.private %}
        <a href="">{{consume_list.user.disc_username}}</a>
        {% else %}
        anonymous
        {% endif %}
        on
        {{consume_list.updated}}
        {% endif %}
        </div>



        <table class="table table-sm table-dark table-hover mx-auto mt-5 text-left" style="background-color:#1C1C1C">
            <thead>
                    <tr>
                        <th colspan="3">
                            <h5 class="fix-me text-center">Crafted Items</h5>
                        </th>
                    </tr>
            </thead>
            <tbody>
                {% for consume in consume_list.consumes.all %}
                <tr>
                    <td>
                        <img class="icon-small" src="{% static "images/icon_border_2.png" %}"
                        style="background-image: url({% static image_prefix|add:consume.img|add:".jpg" %});">
                    </td>
                    <td><span class="q{{consume.quality}}">{{consume.name}}</span></td>
                    <td><span class="fix-me">{{consume.amount}}</span></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        {% if materials %}
        <table class="table table-sm table-dark table-hover mx-auto mt-5 text-left" style="background-color: #1C1C1C">
                <thead>
                        <tr>
                            <th colspan="3">
                                <h5 class="fix-me text-center">Total Materials</h5>
                            </th>
                        </tr>
                </thead>
            <tbody>
                    {% for mat_name,v in materials.items %}
                <tr>
                    <td>
                        <img class="icon-small" src="{% static "images/icon_border_2.png" %}"
                        style="background-image: url({% static image_prefix|add:v.img|add:".jpg" %});">
                    </td>
                    <td><span class="q{{v.quality}}">{{mat_name}}</span></td>
                    <td><span class="fix-me">{{v.value}}</span></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% endif %}
{% endwith %}

{% endif %}
